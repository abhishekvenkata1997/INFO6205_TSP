import React, { useEffect, useRef, useState } from 'react';

import axios from "axios";

const TourMap = (props) => {
  const googleMapRef = useRef(null);
  let googleMap = null;

const locationsList = [
{ lat: 51.483548, lng: -0.009691 },
{ lat: 51.513075, lng: -0.118888 },
{ lat: 51.540042, lng: 0.076327 },
{ lat: 51.500839, lng: -0.418139 },
{ lat: 51.46327, lng: -0.134987 },
{ lat: 51.492689, lng: 0.063946 },
{ lat: 51.542493, lng: -0.198751 },
{ lat: 51.49214, lng: 0.01742 },
{ lat: 51.575913, lng: 0.108427 },
{ lat: 51.559728, lng: -0.097732 },
{ lat: 51.456633, lng: -0.195253 },
{ lat: 51.620426, lng: -0.060842 },
{ lat: 51.568804, lng: -0.395826 },
{ lat: 51.461387, lng: 0.11003 },
{ lat: 51.516965, lng: -0.316302 },
{ lat: 51.570824, lng: -0.081064 },
{ lat: 51.488386, lng: -0.286444 },
{ lat: 51.568875, lng: -0.412302 },
{ lat: 51.404326, lng: -0.173402 },
{ lat: 51.537349, lng: -0.14054 },
{ lat: 51.480916, lng: -0.23688 },
{ lat: 51.533392, lng: -0.091246 },
{ lat: 51.53602, lng: 0.010867 },
{ lat: 51.614863, lng: -0.326938 },
{ lat: 51.619443, lng: -0.077598 },
{ lat: 51.515434, lng: -0.175432 },
{ lat: 51.400562, lng: -0.180597 },
{ lat: 51.485038, lng: -0.203292 },
{ lat: 51.506217, lng: 0.104229 },
{ lat: 51.616224, lng: -0.254319 },
{ lat: 51.519946, lng: -0.142662 },
{ lat: 51.518422, lng: -0.073278 },
{ lat: 51.540987, lng: 0.085412 },
{ lat: 51.505414, lng: -0.088338 },
{ lat: 51.47953, lng: -0.110317 },
{ lat: 51.400999, lng: 0.017404 },
{ lat: 51.605036, lng: 0.219563 },
{ lat: 51.509398, lng: -0.250869 },
{ lat: 51.502367, lng: -0.090684 },
{ lat: 51.509097, lng: -0.146936 },
{ lat: 51.558158, lng: 0.074527 },
{ lat: 51.499842, lng: -0.163434 },
{ lat: 51.560038, lng: 0.070904 },
{ lat: 51.57646, lng: 0.089605 },
{ lat: 51.51236, lng: 0.200686 },
{ lat: 51.540595, lng: -0.144307 },
{ lat: 51.508409, lng: -0.123461 },
{ lat: 51.5186, lng: -0.123056 },
{ lat: 51.549418, lng: -0.239714 },
{ lat: 51.539425, lng: -0.142748 },
{ lat: 51.5353, lng: -0.296968 },
{ lat: 51.462029, lng: -0.137787 },
{ lat: 51.561719, lng: 0.220916 },
{ lat: 51.604769, lng: 0.056 },
{ lat: 51.550118, lng: -0.045933 },
{ lat: 51.519775, lng: -0.071852 },
{ lat: 51.525009, lng: -0.164973 },
{ lat: 51.40768, lng: -0.297572 },
{ lat: 51.568193, lng: -0.227085 },
{ lat: 51.589891, lng: -0.174833 },
{ lat: 51.549348, lng: 0.007704 },
{ lat: 51.527833, lng: -0.021673 },
{ lat: 51.508231, lng: 0.043739 },
{ lat: 51.497058, lng: 0.118445 },
{ lat: 51.536406, lng: -0.461014 },
{ lat: 51.607134, lng: 0.032277 },
{ lat: 51.44936, lng: -0.215976 },
{ lat: 51.475576, lng: -0.138028 },
{ lat: 51.679836, lng: -0.048564 },
{ lat: 51.527366, lng: -0.25759 },
{ lat: 51.546578, lng: 0.029116 },
{ lat: 51.587939, lng: -0.020073 },
{ lat: 51.547152, lng: -0.105771 },
{ lat: 51.493203, lng: -0.047461 },
{ lat: 51.54276, lng: -0.181132 },
{ lat: 51.636226, lng: -0.052682 },
{ lat: 51.473158, lng: -0.168955 },
{ lat: 51.577486, lng: 0.182214 },
{ lat: 51.454714, lng: -0.064836 },
{ lat: 51.560526, lng: -0.011872 },
{ lat: 51.384626, lng: -0.082927 },
{ lat: 51.534355, lng: 0.125223 },
{ lat: 51.497252, lng: -0.167975 },
{ lat: 51.58538, lng: -0.018712 },
{ lat: 51.538028, lng: -0.13349 },
{ lat: 51.576143, lng: -0.14398 },
{ lat: 51.48347, lng: 0.098933 },
{ lat: 51.408918, lng: -0.215178 },
{ lat: 51.572725, lng: -0.008424 },
{ lat: 51.601323, lng: -0.099085 },
{ lat: 51.489662, lng: -0.163368 },
{ lat: 51.527701, lng: 0.11524 },
{ lat: 51.461078, lng: 0.193726 },
{ lat: 51.517255, lng: -0.20077 },
{ lat: 51.583803, lng: -0.325639 },
{ lat: 51.554352, lng: 0.108946 },
{ lat: 51.56381, lng: -0.271476 },
{ lat: 51.48753, lng: -0.097339 },
{ lat: 51.506998, lng: -0.113994 },
{ lat: 51.445563, lng: 0.103109 },
{ lat: 51.402299, lng: 0.096983 },
{ lat: 51.459853, lng: -0.44738 },
{ lat: 51.656002, lng: -0.08779 },
{ lat: 51.490825, lng: -0.111492 },
{ lat: 51.493621, lng: -0.138459 },
{ lat: 51.400817, lng: -0.114785 },
{ lat: 51.48573, lng: 0.014732 },
{ lat: 51.475251, lng: -0.073932 },
{ lat: 51.513827, lng: -0.142363 },
{ lat: 51.54757, lng: -0.11047 },
{ lat: 51.44431, lng: -0.21682 },
{ lat: 51.513708, lng: -0.140004 },
{ lat: 51.509645, lng: 0.02599 },
{ lat: 51.47597, lng: -0.152167 },
{ lat: 51.534753, lng: -0.140141 },
{ lat: 51.549934, lng: -0.141383 },
{ lat: 51.514195, lng: -0.145735 },
{ lat: 51.50033, lng: -0.017778 },
{ lat: 51.577793, lng: -0.201469 },
{ lat: 51.526984, lng: -0.089842 },
{ lat: 51.514684, lng: -0.140844 },
{ lat: 51.421945, lng: 0.001022 },
{ lat: 51.565977, lng: -0.107658 },
{ lat: 51.473328, lng: -0.385556 },
{ lat: 51.530455, lng: -0.106464 },
{ lat: 51.424692, lng: 0.104999 },
{ lat: 51.381824, lng: -0.090905 },
{ lat: 51.504444, lng: -0.418792 },
{ lat: 51.428772, lng: -0.324134 },
{ lat: 51.358411, lng: -0.21842 },
{ lat: 51.407325, lng: -0.130895 },
{ lat: 51.508087, lng: -0.124122 },
{ lat: 51.551486, lng: -0.452096 },
{ lat: 51.460693, lng: -0.120538 },
{ lat: 51.58196, lng: -0.083525 },
{ lat: 51.496888, lng: -0.094356 },
{ lat: 51.588406, lng: -0.017873 },
{ lat: 51.44692, lng: 0.103142 },
{ lat: 51.488158, lng: -0.068634 },
{ lat: 51.511703, lng: -0.128701 },
{ lat: 51.508069, lng: 0.020919 },
{ lat: 51.481394, lng: -0.024806 },
{ lat: 51.575467, lng: -0.034556 },
{ lat: 51.514445, lng: -0.125259 },
{ lat: 51.570846, lng: -0.295091 },
{ lat: 51.546608, lng: -0.480687 },
{ lat: 51.646539, lng: -0.135165 },
{ lat: 51.586493, lng: -0.204648 },
{ lat: 51.487984, lng: -0.194289 },
{ lat: 51.593061, lng: -0.105349 },
{ lat: 51.500446, lng: -0.076587 },
{ lat: 51.426741, lng: 0.045653 },
{ lat: 51.421468, lng: 0.049934 },
{ lat: 51.545695, lng: -0.141729 },
{ lat: 51.489693, lng: -0.220797 },
{ lat: 51.586251, lng: 0.12828 },
{ lat: 51.527008, lng: -0.096819 },
{ lat: 51.492274, lng: -0.065234 },
{ lat: 51.538552, lng: -0.045838 },
{ lat: 51.488202, lng: -0.097211 },
{ lat: 51.513361, lng: -0.12833 },
{ lat: 51.512136, lng: -0.134995 },
{ lat: 51.497123, lng: -0.06317 },
{ lat: 51.527333, lng: -0.415751 },
{ lat: 51.44613, lng: -0.124835 },
{ lat: 51.495556, lng: 0.1314 },
{ lat: 51.554333, lng: -0.315427 },
{ lat: 51.544881, lng: -0.132373 },
{ lat: 51.493505, lng: -0.161283 },
{ lat: 51.5194, lng: -0.107917 },
{ lat: 51.46891, lng: -0.173905 },
{ lat: 51.572656, lng: -0.071621 },
{ lat: 51.524979, lng: -0.083237 },
{ lat: 51.406986, lng: 0.01124 },
{ lat: 51.510952, lng: -0.134064 },
{ lat: 51.47976, lng: -0.045371 },
{ lat: 51.568231, lng: -0.031506 },
{ lat: 51.462029, lng: -0.137787 },
{ lat: 51.455502, lng: -0.122652 },
{ lat: 51.590272, lng: 0.220417 },
{ lat: 51.468986, lng: -0.167855 },
{ lat: 51.530394, lng: -0.143693 },
{ lat: 51.51179, lng: -0.131925 },
{ lat: 51.510942, lng: -0.131196 },
{ lat: 51.543677, lng: -0.477901 },
{ lat: 51.529035, lng: -0.140778 },
{ lat: 51.54558, lng: -0.075477 },
{ lat: 51.536887, lng: -0.047884 },
{ lat: 51.454274, lng: 0.003127 },
{ lat: 51.393796, lng: -0.204951 },
{ lat: 51.525296, lng: -0.131609 },
{ lat: 51.513406, lng: -0.131715 },
{ lat: 51.52166, lng: -0.09093 },
{ lat: 51.592759, lng: -0.306788 },
{ lat: 51.596899, lng: -0.24128 },
{ lat: 51.354449, lng: -0.09645 },
{ lat: 51.399089, lng: 0.018628 },
{ lat: 51.521135, lng: -0.434272 },
{ lat: 51.46613, lng: -0.276595 },
{ lat: 51.586857, lng: 0.025958 },
{ lat: 51.636943, lng: -0.041192 },
{ lat: 51.407393, lng: -0.18093 },
{ lat: 51.446382, lng: 0.152121 },
{ lat: 51.579181, lng: -0.399098 },
{ lat: 51.410088, lng: 0.07574 },
{ lat: 51.513647, lng: -0.18196 },
{ lat: 51.505474, lng: -0.192517 },
{ lat: 51.53602, lng: 0.052438 },
{ lat: 51.556292, lng: -0.361011 },
{ lat: 51.534988, lng: -0.34666 },
{ lat: 51.469029, lng: -0.096036 },
{ lat: 51.547257, lng: 0.078675 },
{ lat: 51.405141, lng: -0.165692 },
{ lat: 51.323819, lng: -0.10296 },
{ lat: 51.529254, lng: -0.05614 },
{ lat: 51.45539, lng: -0.127464 },
{ lat: 51.507942, lng: -0.23052 },
{ lat: 51.554578, lng: -0.05294 },
{ lat: 51.359704, lng: -0.144756 },
{ lat: 51.387306, lng: -0.188065 },
{ lat: 51.409953, lng: -0.145742 },
{ lat: 51.435474, lng: 0.005527 },
{ lat: 51.432096, lng: -0.130689 },
{ lat: 51.535373, lng: 0.196879 },
{ lat: 51.566119, lng: -0.417289 },
{ lat: 51.47611, lng: -0.198156 },
{ lat: 51.477401, lng: -0.090503 },
{ lat: 51.518735, lng: -0.057886 },
{ lat: 51.396268, lng: -0.100927 },
{ lat: 51.371195, lng: -0.10254 },
{ lat: 51.528645, lng: -0.128136 },
{ lat: 51.563817, lng: -0.443468 },
{ lat: 51.511703, lng: -0.128701 },
{ lat: 51.558988, lng: -0.250049 },
{ lat: 51.497988, lng: -0.167888 },
{ lat: 51.510373, lng: -0.120887 },
{ lat: 51.58022, lng: 0.047227 },
{ lat: 51.529674, lng: -0.115479 },
{ lat: 51.546676, lng: -1.15E-4 },
{ lat: 51.464088, lng: -0.136062 },
{ lat: 51.515088, lng: -0.140222 },
{ lat: 51.543293, lng: -0.006898 },
{ lat: 51.524856, lng: -0.385089 },
{ lat: 51.46912, lng: -0.364328 },
{ lat: 51.608598, lng: 0.035476 },
{ lat: 51.57771, lng: -0.344943 },
{ lat: 51.506374, lng: -0.100949 },
{ lat: 51.491604, lng: -0.149605 },
{ lat: 51.433396, lng: -0.104639 },
{ lat: 51.589555, lng: -0.258056 },
{ lat: 51.512513, lng: -0.133841 },
{ lat: 51.594505, lng: -0.419132 },
{ lat: 51.439813, lng: -0.055552 },
{ lat: 51.541678, lng: -0.292172 },
{ lat: 51.364989, lng: -0.192925 },
{ lat: 51.515684, lng: -0.135874 },
{ lat: 51.546064, lng: -0.483806 },
{ lat: 51.612721, lng: -0.02639 },
{ lat: 51.336951, lng: -0.117062 },
{ lat: 51.510896, lng: -0.31948 },
{ lat: 51.546295, lng: -0.179462 },
{ lat: 51.513243, lng: -0.127139 },
{ lat: 51.522758, lng: -0.105962 },
{ lat: 51.630544, lng: 0.007025 },
{ lat: 51.601123, lng: -0.194685 },
{ lat: 51.456574, lng: -0.069622 },
{ lat: 51.572221, lng: -0.26804 },
{ lat: 51.657767, lng: -0.069253 },
{ lat: 51.570924, lng: -0.363082 },
{ lat: 51.509785, lng: -0.068095 },
{ lat: 51.602816, lng: -0.307699 },
{ lat: 51.548631, lng: -0.200903 },
{ lat: 51.543117, lng: -0.149304 },
{ lat: 51.453099, lng: -0.10355 },
{ lat: 51.588571, lng: -0.39731 },
{ lat: 51.558235, lng: -0.245403 },
{ lat: 51.553863, lng: -0.287922 },
{ lat: 51.500377, lng: -0.297794 },
{ lat: 51.500588, lng: -0.034134 },
{ lat: 51.497717, lng: -0.416058 },
{ lat: 51.609793, lng: 0.216271 },
{ lat: 51.512078, lng: -0.141526 },
{ lat: 51.540595, lng: -0.144307 },
{ lat: 51.442223, lng: -0.366033 },
{ lat: 51.527028, lng: -0.251808 },
{ lat: 51.576901, lng: -0.010768 },
{ lat: 51.570207, lng: -0.130917 },
{ lat: 51.610971, lng: -0.070922 },
{ lat: 51.528176, lng: -0.102854 },
{ lat: 51.495541, lng: -0.116432 },
{ lat: 51.509158, lng: -0.13493 },
{ lat: 51.501376, lng: -0.189797 },
{ lat: 51.516058, lng: -0.140154 },
{ lat: 51.575269, lng: -0.073055 },
{ lat: 51.314603, lng: 0.033572 },
{ lat: 51.650752, lng: -0.029726 },
{ lat: 51.50835, lng: -0.170369 },
{ lat: 51.492965, lng: -0.176243 },
{ lat: 51.488404, lng: -0.071058 },
{ lat: 51.577558, lng: -0.084836 },
{ lat: 51.522669, lng: -0.165413 },
{ lat: 51.497784, lng: -0.094708 },
{ lat: 51.557771, lng: -0.08245 },
{ lat: 51.470361, lng: -0.458471 },
{ lat: 51.523934, lng: -0.423047 },
{ lat: 51.485777, lng: 0.017226 },
{ lat: 51.421483, lng: 0.062405 },
{ lat: 51.52355, lng: -0.099284 },
{ lat: 51.405853, lng: 0.018034 },
{ lat: 51.50993, lng: -0.030302 },
{ lat: 51.581522, lng: 0.163625 },
{ lat: 51.545323, lng: 0.030978 },
{ lat: 51.535407, lng: -0.282747 },
{ lat: 51.47824, lng: -0.026066 },
{ lat: 51.49026, lng: 0.148079 },
{ lat: 51.622939, lng: 0.005302 },
{ lat: 51.514506, lng: -0.268458 },
{ lat: 51.504168, lng: -0.089168 },
{ lat: 51.565102, lng: -0.06943 },
{ lat: 51.559548, lng: -0.284376 },
{ lat: 51.509932, lng: -0.325683 },
{ lat: 51.564087, lng: -0.104245 },
{ lat: 51.462606, lng: -0.114788 },
{ lat: 51.400022, lng: -0.255044 },
{ lat: 51.54402, lng: -0.066991 },
{ lat: 51.487816, lng: 0.082697 },
{ lat: 51.565118, lng: -0.138845 },
{ lat: 51.462846, lng: -0.009109 },
{ lat: 51.506716, lng: -0.351075 },
{ lat: 51.58423, lng: -0.072733 },
{ lat: 51.396996, lng: -0.092042 },
{ lat: 51.447195, lng: -0.416454 },
{ lat: 51.507422, lng: -0.38657 },
{ lat: 51.508399, lng: -0.272681 },
{ lat: 51.543293, lng: -0.006898 },
{ lat: 51.438791, lng: -0.155941 },
{ lat: 51.560381, lng: -0.099148 },
{ lat: 51.489064, lng: -0.191437 },
{ lat: 51.482392, lng: -0.051163 },
{ lat: 51.445662, lng: -0.148556 },
{ lat: 51.597678, lng: -0.333864 },
{ lat: 51.536435, lng: 0.077893 },
{ lat: 51.51401, lng: -0.124528 },
{ lat: 51.537288, lng: -0.02778 },
{ lat: 51.470924, lng: -0.062926 },
{ lat: 51.526132, lng: -0.080594 },
{ lat: 51.583216, lng: 0.183308 },
{ lat: 51.64643, lng: -0.21435 },
{ lat: 51.54511, lng: 0.16556 },
{ lat: 51.459266, lng: 0.080044 },
{ lat: 51.535191, lng: -0.45474 },
{ lat: 51.573667, lng: 0.017449 },
{ lat: 51.473079, lng: -0.061107 },
{ lat: 51.505386, lng: -0.089938 },
{ lat: 51.42, lng: -0.176258 },
{ lat: 51.355152, lng: -0.099741 },
{ lat: 51.579491, lng: -0.099794 },
{ lat: 51.490506, lng: -0.185834 },
{ lat: 51.498139, lng: -0.06804 },
{ lat: 51.312091, lng: -0.099569 },
{ lat: 51.513064, lng: -0.129438 },
{ lat: 51.603411, lng: -0.128861 },
{ lat: 51.661535, lng: -0.061618 },
{ lat: 51.425167, lng: -0.003886 },
{ lat: 51.527637, lng: -0.142205 },
{ lat: 51.431078, lng: 0.058852 },
{ lat: 51.470735, lng: 0.109061 },
{ lat: 51.518214, lng: -0.397791 },
{ lat: 51.487124, lng: 0.006338 },
{ lat: 51.459749, lng: -0.198469 },
{ lat: 51.507893, lng: -0.346076 },
{ lat: 51.446032, lng: -0.135589 },
{ lat: 51.473036, lng: 0.023388 },
{ lat: 51.487289, lng: -0.110774 },
{ lat: 51.394167, lng: -0.042682 },
{ lat: 51.372592, lng: -0.101088 },
{ lat: 51.544171, lng: -0.004595 },
{ lat: 51.579711, lng: 0.180772 },
{ lat: 51.514824, lng: -0.241494 },
{ lat: 51.564764, lng: -0.10553 },
{ lat: 51.399107, lng: -0.099674 },
{ lat: 51.411621, lng: -0.299856 },
{ lat: 51.524358, lng: 0.011319 },
{ lat: 51.401212, lng: -0.093635 },
{ lat: 51.531479, lng: -0.349878 },
{ lat: 51.56367, lng: -0.010047 },
{ lat: 51.666585, lng: -0.085508 },
{ lat: 51.552087, lng: -0.115678 },
{ lat: 51.504937, lng: -0.233993 },
{ lat: 51.588228, lng: -0.436794 },
{ lat: 51.503176, lng: -0.219826 },
{ lat: 51.427032, lng: -0.035466 },
{ lat: 51.60794, lng: -0.089089 },
{ lat: 51.378988, lng: -0.097878 },
{ lat: 51.375174, lng: -0.303965 },
{ lat: 51.651448, lng: -0.178057 },
{ lat: 51.455522, lng: 0.145037 },
{ lat: 51.47072, lng: -0.069112 },
{ lat: 51.579667, lng: -0.334538 },
{ lat: 51.514492, lng: -0.131037 },
{ lat: 51.552902, lng: -0.054353 },
{ lat: 51.41387, lng: -0.005327 },
{ lat: 51.491347, lng: -0.072245 },
{ lat: 51.573918, lng: -0.076705 },
{ lat: 51.586772, lng: -0.333354 },
{ lat: 51.594358, lng: 0.208301 },
{ lat: 51.587324, lng: -0.034319 },
{ lat: 51.485535, lng: -0.124227 },
{ lat: 51.571318, lng: -0.204957 },
{ lat: 51.61388, lng: -0.065772 },
{ lat: 51.485008, lng: -0.072296 },
{ lat: 51.403237, lng: -0.193287 },
{ lat: 51.504266, lng: -0.279652 },
{ lat: 51.491926, lng: -0.088441 },
{ lat: 51.523687, lng: 0.004817 },
{ lat: 51.556456, lng: -0.312969 },
{ lat: 51.525812, lng: -0.487838 },
{ lat: 51.606807, lng: -0.209406 },
{ lat: 51.503993, lng: 0.045955 },
{ lat: 51.488618, lng: -0.122473 },
{ lat: 51.482585, lng: -0.177824 },
{ lat: 51.523786, lng: -0.138152 },
{ lat: 51.497037, lng: -0.090273 },
{ lat: 51.572571, lng: -0.09063 },
{ lat: 51.628983, lng: -0.045407 },
{ lat: 51.538044, lng: 0.080981 },
{ lat: 51.544443, lng: -0.006314 },
{ lat: 51.523768, lng: -0.016861 },
{ lat: 51.467667, lng: -0.047126 },
{ lat: 51.546169, lng: 0.193274 },
{ lat: 51.454757, lng: -0.142531 },
{ lat: 51.512336, lng: -0.14705 },
{ lat: 51.513777, lng: -0.123456 },
{ lat: 51.51525, lng: -0.206081 },
{ lat: 51.59271, lng: -0.206048 },
{ lat: 51.521028, lng: -0.14171 },
{ lat: 51.416061, lng: -0.055438 },
{ lat: 51.632317, lng: -0.052301 },
{ lat: 51.445295, lng: -0.020407 },
{ lat: 51.367196, lng: -0.298226 },
{ lat: 51.400629, lng: -0.03598 },
{ lat: 51.50062, lng: -0.193474 },
{ lat: 51.490054, lng: -0.204348 },
{ lat: 51.483613, lng: -0.373023 },
{ lat: 51.454398, lng: -0.319555 },
{ lat: 51.53902, lng: -0.056142 },
{ lat: 51.551104, lng: -0.060892 },
{ lat: 51.513848, lng: -0.129593 },
{ lat: 51.392837, lng: -0.295363 },
{ lat: 51.544171, lng: -0.136902 },
{ lat: 51.656005, lng: -0.035686 },
{ lat: 51.532452, lng: -0.088734 },
{ lat: 51.579435, lng: 0.185659 },
{ lat: 51.557589, lng: -0.138734 },
{ lat: 51.655359, lng: -0.052513 },
{ lat: 51.54052, lng: -0.054939 },
{ lat: 51.497367, lng: -0.098947 },
{ lat: 51.555153, lng: -0.316811 },
{ lat: 51.528633, lng: -0.125729 },
{ lat: 51.528745, lng: 0.156162 },
{ lat: 51.49012, lng: -0.165625 },
{ lat: 51.443194, lng: -0.337248 },
{ lat: 51.43917, lng: -0.361192 },
{ lat: 51.398513, lng: -0.11521 },
{ lat: 51.481028, lng: -0.143293 },
{ lat: 51.517182, lng: -0.054824 },
{ lat: 51.51179, lng: -0.131925 },
{ lat: 51.515087, lng: -0.136201 },
{ lat: 51.515267, lng: -0.181478 },
{ lat: 51.51742, lng: -0.234721 },
{ lat: 51.557658, lng: -0.007135 },
{ lat: 51.541065, lng: -0.266368 },
{ lat: 51.530061, lng: -0.069615 },
{ lat: 51.594524, lng: -0.109663 },
{ lat: 51.500987, lng: -0.16189 },
{ lat: 51.498757, lng: 0.125944 },
{ lat: 51.472883, lng: 0.158537 },
{ lat: 51.452926, lng: -0.062738 },
{ lat: 51.506831, lng: 0.216876 },
{ lat: 51.393407, lng: -0.296205 },
{ lat: 51.52274, lng: -0.417193 },
{ lat: 51.514052, lng: -0.154345 },
{ lat: 51.535076, lng: -0.189556 },
{ lat: 51.560038, lng: 0.070904 },
{ lat: 51.436987, lng: -0.128346 },
{ lat: 51.501201, lng: -0.111971 },
{ lat: 51.367486, lng: -0.025574 },
{ lat: 51.582419, lng: 0.063911 },
{ lat: 51.589026, lng: -0.086115 },
{ lat: 51.510221, lng: -0.384742 },
{ lat: 51.606501, lng: -0.066548 },
{ lat: 51.36049, lng: -0.195055 },
{ lat: 51.517684, lng: -0.151474 },
{ lat: 51.492948, lng: 0.121731 },
{ lat: 51.546108, lng: 0.12029 },
{ lat: 51.470774, lng: -0.366079 },
{ lat: 51.443638, lng: -0.152494 },
{ lat: 51.600363, lng: 0.084536 },
{ lat: 51.568683, lng: -0.108195 },
{ lat: 51.359052, lng: -0.142168 },
{ lat: 51.429562, lng: 0.118688 },
{ lat: 51.549652, lng: 0.101718 },
{ lat: 51.550413, lng: 0.147608 },
{ lat: 51.51163, lng: -0.121916 },
{ lat: 51.510942, lng: -0.131196 },
{ lat: 51.497865, lng: -0.437115 },
{ lat: 51.53002, lng: 0.083123 },
{ lat: 51.466898, lng: 0.009554 },
{ lat: 51.468077, lng: -0.093916 },
{ lat: 51.472736, lng: -0.068681 },
{ lat: 51.602281, lng: -0.121759 },
{ lat: 51.529849, lng: -0.123588 },
{ lat: 51.55981, lng: 0.073678 },
{ lat: 51.563272, lng: -0.103875 },
{ lat: 51.538136, lng: -0.141993 },
{ lat: 51.542136, lng: -0.040709 },
{ lat: 51.51335, lng: -0.159461 },
{ lat: 51.494268, lng: -0.083157 },
{ lat: 51.46836, lng: -0.023037 },
{ lat: 51.483491, lng: -0.103398 },
{ lat: 51.473944, lng: -0.324351 },
{ lat: 51.526563, lng: -0.092656 },
{ lat: 51.455257, lng: 0.094587 },
{ lat: 51.516166, lng: -0.137324 },
{ lat: 51.453122, lng: -0.142036 },
{ lat: 51.608904, lng: 0.123764 },
{ lat: 51.369471, lng: -0.196627 },
{ lat: 51.491327, lng: -0.048247 },
{ lat: 51.520779, lng: -0.031636 },
{ lat: 51.381843, lng: -0.110334 },
{ lat: 51.41913, lng: -0.143774 },
{ lat: 51.521582, lng: -0.050053 },
{ lat: 51.487966, lng: -0.110415 },
{ lat: 51.489205, lng: -0.114195 },
{ lat: 51.540267, lng: -0.195551 },
{ lat: 51.394462, lng: -0.088855 },
{ lat: 51.533407, lng: 0.154017 },
{ lat: 51.536473, lng: -0.100995 },
{ lat: 51.423432, lng: -0.359871 },
{ lat: 51.497809, lng: -0.04918 },
{ lat: 51.478192, lng: 0.050043 },
{ lat: 51.553159, lng: 0.005708 },
{ lat: 51.412869, lng: -0.004623 },
{ lat: 51.514246, lng: -0.131436 },
{ lat: 51.576028, lng: 0.181563 },
{ lat: 51.490825, lng: -0.111492 },
{ lat: 51.590878, lng: -0.059834 },
{ lat: 51.48199, lng: 0.07958 },
{ lat: 51.605844, lng: 0.077682 },
{ lat: 51.549724, lng: -0.22062 },
{ lat: 51.51968, lng: -0.125347 },
{ lat: 51.429261, lng: -0.311227 },
{ lat: 51.392517, lng: -0.0761 },
{ lat: 51.545342, lng: -0.056118 },
{ lat: 51.478737, lng: -0.036356 },
{ lat: 51.462958, lng: -0.169349 },
{ lat: 51.62818, lng: -0.03933 },
{ lat: 51.378124, lng: -0.102799 },
{ lat: 51.561826, lng: 0.153427 },
{ lat: 51.496827, lng: -0.16782 },
{ lat: 51.454287, lng: -0.105847 },
{ lat: 51.613718, lng: -0.069 },
{ lat: 51.563174, lng: -0.275901 },
{ lat: 51.475383, lng: -0.185383 },
{ lat: 51.546966, lng: -0.292869 },
{ lat: 51.553632, lng: -0.166129 },
{ lat: 51.588911, lng: -0.037253 },
{ lat: 51.533833, lng: 0.116274 },
{ lat: 51.525009, lng: -0.164973 },
{ lat: 51.531775, lng: 0.028645 },
{ lat: 51.581095, lng: -0.335683 },
{ lat: 51.59382, lng: -0.09446 },
{ lat: 51.443817, lng: -0.166747 },
{ lat: 51.481773, lng: -0.080152 },
{ lat: 51.559805, lng: -0.208901 },
{ lat: 51.374063, lng: -0.101933 },
{ lat: 51.46912, lng: -0.364328 },
{ lat: 51.556032, lng: -0.050022 },
{ lat: 51.583008, lng: -0.036483 },
{ lat: 51.493347, lng: -0.093957 },
{ lat: 51.575535, lng: 0.192089 },
{ lat: 51.49506, lng: -0.476135 },
{ lat: 51.513114, lng: -0.138803 },
{ lat: 51.411236, lng: 0.105128 },
{ lat: 51.58724, lng: -0.077528 }
  ];

  const [arr, setArr] = useState([]);

  const [matrix, setMatrix] = useState([[]]);
  
  const [load, setLoad] = useState(false);

  const [isMatrix, setIsMatrix] = useState(false);

  const [dist, setDist] = useState(0.0);
  
  // const delay = ms => new Promise(
  //   resolve => setTimeout(resolve, ms)
  // );

  const algo = props.data;

  let distance = 0.0;
  async function drawLines() {
    for(let i = 1; i < arr.length - 1; i++) {
       distance += parseFloat(matrix[arr[i-1]][arr[i]]);
       setDist(distance);
      await drawLine(locationsList[arr[i-1]], locationsList[arr[i]]);
    }
  }

  async function drawLine(marker1, marker2) {
    const line = await drawLineWithDelay(marker1, marker2);
    return line;
  }

  const drawLineWithDelay = async (marker1, marker2) => {
    return new Promise(resolve => {
      setTimeout(() => {
        const line = new window.google.maps.Polyline({
          path: [marker1, marker2],
          map: googleMap,
        });
        resolve(line);
      }, 100);
    });
  };

  const getTour = (algo) => {
    console.log(algo);
    setLoad(false);
    setArr([]);
    console.log(arr);
    axios.get('http://localhost:8080/' + algo)
            .then(response => {
              console.log(response.data);
              const temp = response.data;
                setArr([...temp]);
                setLoad(true);
                console.log(arr);
            }).catch(error => {
                
            })
  }

  const getMatrix = () => {
    console.log("");
    axios.get('http://localhost:8080/distance')
      .then(response => {
        console.log(response.data);
        const temp = response.data;
        setMatrix([...temp]);
        setIsMatrix(true);
        console.log(arr);
      }).catch(error => {
        
      })
  }

 

useEffect(() => {
  googleMap = initGoogleMap();

  if(!isMatrix){
    getMatrix();
  }

  var bounds = new window.google.maps.LatLngBounds();

  
     const drawLocations = (obj) => {
      const marker = new window.google.maps.Marker({
        position: obj,
        map: googleMap
      });
      return marker;
    }
  locationsList.map(x => {
    drawLocations(x)
    bounds.extend(x);
  });
  googleMap.fitBounds(bounds);
  if(load){
    drawLines();
  } else {
    console.log("waiting");
  }
  
}, [arr]);

useEffect(() => {
  getTour(algo);
}, [algo])

useEffect(() => {
  console.log("array after set", arr);
}, [arr]);

  // useEffect(() => {

  //   const drawMarker = (obj) => {
  //     const marker = new window.google.maps.Marker({
  //       position: obj,
  //       map: googleMap
  //     });
  //     return marker;
  //   }

  //   // async function drawLine(marker1, marker2) {
  //   //   const line = new window.google.maps.Polyline({
  //   //     path: [marker1, marker2],
  //   //     map: googleMap,
  //   //   });
  //   //   await delay(1000);
  //   //   return line;
  //   // }

  //   const drawLineWithDelay = async (marker1, marker2) => {
  //     return new Promise(resolve => {
  //       setTimeout(() => {
  //         const line = new window.google.maps.Polyline({
  //           path: [marker1, marker2],
  //           map: googleMap,
  //         });
  //         resolve(line);
  //       }, 1000);
  //     });
  //   };
    
  //   async function drawLine(marker1, marker2) {
  //     const line = await drawLineWithDelay(marker1, marker2);
  //     return line;
  //   }

  //   googleMap = initGoogleMap();

  //   var bounds = new window.google.maps.LatLngBounds();
  //   markerList.map(x => {
  //     drawMarker(x)
  //     bounds.extend(x);
  //   });
  //   googleMap.fitBounds(bounds);

  //   const arr = [233, 275, 457, 166, 415, 564, 253, 50, 312, 471, 284, 69, 469, 378, 37, 316, 333, 412, 277, 16, 198, 20, 154, 388, 216, 390, 433, 93, 441, 206, 291, 474, 41, 82, 90, 168, 234, 297, 357, 148, 27, 337, 442, 225, 563, 420, 180, 76, 170, 555, 10, 369, 66, 110, 559, 460, 113, 67, 464, 239, 4, 51, 177, 430, 524, 339, 335, 496, 572, 354, 201, 18, 26, 411, 219, 189, 87, 323, 448, 479, 57, 381, 551, 128, 461, 444, 520, 576, 243, 495, 123, 443, 370, 328, 320, 259, 14, 209, 384, 208, 268, 245, 398, 94, 404, 570, 340, 23, 270, 193, 144, 266, 96, 562, 319, 276, 249, 194, 29, 347, 395, 146, 102, 386, 68, 450, 295, 454, 362, 267, 556, 200, 75, 424, 437, 263, 315, 244, 65, 53, 548, 497, 525, 155, 8, 43, 487, 236, 199, 351, 88, 285, 136, 71, 83, 406, 566, 578, 142, 176, 577, 54, 217, 400, 446, 324, 186, 445, 158, 187, 455, 553, 472, 214, 531, 227, 55, 31, 345, 119, 21, 156, 124, 237, 230, 185, 19, 45, 49, 84, 114, 181, 364, 30, 108, 39, 111, 116, 120, 139, 1, 46, 98, 131, 143, 47, 160, 161, 174, 182, 183, 191, 232, 235, 250, 240, 255, 261, 290, 281, 292, 360, 342, 399, 432, 447, 466, 467, 421, 190, 435, 492, 431, 481, 516, 296, 25, 205, 468, 300, 56, 568, 482, 534, 6, 271, 260, 74, 565, 453, 115, 153, 167, 282, 272, 449, 514, 511, 458, 550, 503, 504, 523, 543, 582, 104, 247, 560, 273, 164, 371, 222, 484, 248, 530, 220, 130, 463, 105, 383, 228, 330, 380, 535, 552, 80, 126, 393, 229, 375, 557, 529, 575, 195, 355, 499, 218, 526, 254, 491, 129, 439, 394, 538, 462, 283, 331, 101, 303, 581, 505, 279, 3, 127, 489, 332, 242, 367, 480, 163, 304, 197, 416, 256, 145, 184, 350, 64, 132, 231, 224, 17, 12, 203, 274, 251, 389, 48, 549, 574, 58, 408, 118, 147, 434, 417, 264, 59, 85, 326, 286, 403, 15, 171, 293, 299, 134, 329, 584, 488, 571, 89, 510, 361, 473, 149, 392, 24, 561, 11, 409, 287, 490, 546, 318, 423, 356, 513, 9, 122, 321, 336, 379, 498, 387, 72, 109, 537, 288, 262, 169, 307, 192, 172, 451, 521, 527, 73, 539, 162, 150, 33, 38, 135, 159, 97, 373, 34, 519, 103, 289, 419, 407, 532, 533, 545, 517, 301, 317, 246, 353, 422, 413, 456, 485, 579, 410, 138, 157, 298, 402, 358, 269, 465, 528, 309, 117, 0, 305, 7, 106, 368, 372, 507, 188, 438, 327, 518, 313, 141, 554, 175, 338, 428, 265, 78, 477, 252, 391, 436, 374, 440, 486, 196, 35, 173, 308, 401, 542, 121, 363, 221, 365, 151, 152, 306, 204, 100, 583, 125, 500, 202, 396, 349, 522, 137, 99, 13, 366, 86, 325, 547, 5, 418, 62, 140, 112, 382, 414, 569, 207, 70, 311, 22, 426, 238, 60, 541, 470, 79, 385, 376, 241, 334, 61, 427, 506, 341, 2, 32, 211, 512, 40, 42, 483, 501, 95, 494, 502, 558, 310, 544, 77, 346, 377, 452, 580, 52, 179, 405, 280, 36, 348, 429, 223, 44, 478, 92, 476, 314, 493, 63, 165, 475, 28, 91, 567, 81, 536, 459, 425, 257, 515, 343, 278, 540, 294, 359, 213, 258, 226, 573, 107, 344, 352, 397, 509, 508, 210, 322, 133, 178, 215, 302, 212];

  //   for(let i = 1; i < arr.length-1; i++) {
  //     drawLine(markerList[arr[i-1]], markerList[arr[i]]);
      
  //   }

  //   // drawLine(markerList[0], markerList[1]);
  //   // drawLine(markerList[1], markerList[2]);
  // }, []);

  const initGoogleMap = () => {
    return new window.google.maps.Map(googleMapRef.current, {
      center: { lat: -34.397, lng: 150.644 },
      zoom: 8
    });
  }



  return <div>
    <div
    ref={googleMapRef}
    style={{ width: "100%", height: 700 }}
  />
  <h2>Distance :{dist}</h2>
    </div>
}

export default TourMap;